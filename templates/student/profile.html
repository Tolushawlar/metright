{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Brintschool | Profile</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="{% static "dashboard/vendor/bootstrap/css/bootstrap.min.css" %}">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="{% static "dashboard/vendor/font-awesome/css/font-awesome.min.css" %}">
    <!-- Fontastic Custom icon font-->
    <link rel="stylesheet" href="{% static "dashboard/css/fontastic.css" %}">
    <!-- Google fonts - Roboto -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700">
    <!-- jQuery Circle-->
    <link rel="stylesheet" href="{% static "dashboard/css/grasp_mobile_progress_circle-1.0.0.min.css" %}">
    <!-- Custom Scrollbar-->
    <link rel="stylesheet" href="{% static "dashboard/vendor/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.css" %}">
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="{% static "dashboard/css/style.default.premium.css" %}" id="theme-stylesheet">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="{% static "dashboard/css/custom.css" %}">
    <!-- Favicon-->
    <link rel="shortcut icon" href="{% static "dashboard/img/favicon.ico" %}">
    <!-- Tweaks for older IEs--><!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
  </head>
  <body>
      {% include "student/sidebar.html" %}
        <div class="page">
        <!-- navbar-->
        {% include "snippets/header.html" %}
        
        <!-- Statistics Section-->
        <section class="statistics">
            <div class="container-fluid">
            <div class="row d-flex">
                <div class="col-lg-1">
                </div>
                <div class="col-lg-10">
                  <br>
                  <div class="form-inner">
                    <div class="logo text-uppercase"><span>Brint</span><strong class="text-primary">School</strong></div>
                    <p>online school management platform</p>
                       {% if messages %}
                          {% for message in messages %}
                          {% if message.tags == 'success' %}
                            <span id="demoMessage4" class="btn btn-success">{{message}}</span>
                          {% endif %} 
                          {% if message.tags == 'error' %}
                            <span id="demoMessage4" class="btn btn-danger">{{message}}</span>
                          {% endif %}
                          {% endfor %}
                      {% endif %}
                    <br>
                    <form class="text-left form-validate" method="POST" action="{% url "EditProfileSaveStudent" %}" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="form-group-material">
                          <input id="firstname" readonly type="text" name="firstname" value="{{ user_data.first_name }}" required data-msg="Please enter Admin Firstname" class="input-material">
                          <label for="firstname" class="label-material">FirstName</label>
                        </div>
                        <div class="form-group-material">
                          <input id="lastname" readonly type="text" name="lastname" value="{{ user_data.last_name }}" required data-msg="Please enter Admin Lastname" class="input-material">
                          <label for="lastname" class="label-material">LastName</label>
                        </div>
                        <div class="form-group-material">
                          <input id="username" type="text" name="username" value="{{ user_data.username }}" required data-msg="Please enter Admin Username" class="input-material">
                          <label for="username" class="label-material">Username</label>
                        </div>
                        <div class="form-group-material">
                          <input id="email" readonly type="email" name="email" value="{{ user_data.email }}" required data-msg="Please enter a valid email address" class="input-material">
                          <label for="email" class="label-material">Email Address</label>
                        </div>
                        <div class="form-group-material">
                            <input id="password" type="password" name="password"  class="input-material">
                            <label for="password" class="label-material">Change Password</label>
                          </div>
                          <div class="form-group-material">
                            <input id="address" type="text" name="address" value="{{ student.address }}" required data-msg="Please enter Staff Address" class="input-material">
                            <label for="address" class="label-material">Address</label>
                          </div>
                          <div class="form-group-material">
                            <label for="image" class="label-material">Image</label>
                            <input id="image" type="file" name="image" required data-msg="Please Select Student Image" class="input-material">
                            <input id="student_id" type="hidden" name="student_id" value="{{ student.admin.id }}" class="input-material">
                          </div>
                          <label for="gender" class="label-material">Gender</label>
                          <div class="form-group-material">
                            <select id="gender" type="text" name="gender" value="{{student.gender}}" required data-msg="Please enter Student Gender" class=" form-control select-material">
                                <option {% if student.gender == "Male" %} selected {% endif %}>Male</option>
                                <option {% if student.gender == "Female" %} selected {% endif %}>Female</option>
                            </select>                        
                          </div>

                          <input id="Admin_id" type="hidden" name="Admin_id" value="{{ user_data.id }}" class="input-material">
                        
                        <div class="form-group text-center">
                          <input id="register" type="submit" value="Update Student" class="btn btn-primary">
                        </div>
  
                        
                      </form>
                  </div>
                </div>
                <div class="col-lg-1">
                </div>
            </div>
            </div>
        </section>

        {% include "snippets/footer.html" %}
        </div>
      <!-- JavaScript files-->
      <script src="{% static "dashboard/vendor/jquery/jquery.min.js" %}"></script>
      <script src="{% static "dashboard/vendor/bootstrap/js/bootstrap.bundle.min.js" %}"></script>
      <script src="{% static "dashboard/vendor/jquery.cookie/jquery.cookie.js" %}"> </script>
      <script src="{% static "dashboard/js/grasp_mobile_progress_circle-1.0.0.min.js" %}"></script>
      <script src="{% static "dashboard/vendor/chart.js/Chart.min.js" %}"></script>
      <script src="{% static "dashboard/vendor/jquery-validation/jquery.validate.min.js" %}"></script>
      <script src="{% static "dashboard/vendor/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.concat.min.js" %}"></script>
      <script src="{% static "dashboard/js/charts-home.js" %}"></script>
      <!-- Notifications-->
      <!-- <script src="{% static "dashboard/vendor/messenger-hubspot/build/js/messenger.min.js" %}">   </script> -->
      <script src="{% static "dashboard/vendor/messenger-hubspot/build/js/messenger-theme-flat.js" %}">       </script>
      <script src="{% static "dashboard/js/home-premium.js" %}"> </script>
      <!-- Main File-->
      <script src="{% static "dashboard/js/front.js" %}"></script>
      <script>
        $(document).ready(function(){
          $("#email").keyup(function(){
            var email = $(this).val();

            if(email != ""){
              $.ajax({
                url: "{% url 'CheckEmailStudent' %}",
                type: 'POST',
                data: {email:email}
              })
              .done(function(response){
                  if(response == "True"){
                    $(".email_error").remove();
                    $("<span id='demoMessage4' class='email_error' style='padding:1px;color:red; font-size:9px'> Email Already In Use</span>").insertAfter("#email")
                  }
                  else{
                    $(".email_error").remove();
                    $("<span id='demoMessage4' class='email_error' style='padding:1px;color:green; font-size:9px'>Email Available</span>").insertAfter("#email")
                  }
              })
              .fail(function(){
                console.log('failed')
              })
            }
            else{
              $(".email_error").remove();
            }
          });

          $("#username").keyup(function(){
            var username = $(this).val();

            if(username != ""){
              $.ajax({
                url: "{% url 'CheckUsernameStudent' %}",
                type: 'POST',
                data: {username:username}
              })
              .done(function(response){
                  console.log(response)
                  if(response == "True"){
                    $(".username_error").remove();
                    $("<span id='demoMessage4' class='username_error' style='padding:1px;color:red; font-size:9px'> Username Already In Use</span>").insertAfter("#username")
                  }
                  else{
                    $(".username_error").remove();
                    $("<span id='demoMessage4' class='username_error' style='padding:1px;color:green; font-size:9px'>Username Available</span>").insertAfter("#username")
                  }
              })
              .fail(function(){
                console.log('failed')
              })
            }
            else{
              $(".username_error").remove();
            }
          })
        })
      </script>
    </body>
</html>